const CACHE_NAME="budget",URLS_CACHE_ONLY=["/offline.html","/offline.png"],URLS_OVER_NETWORK_WITH_CACHE_FALLBACK=["/index.html","/transactions.html","/thanks.html","/RGraph.js","/favicon-128x128.png"];self.addEventListener("install",function(e){e.waitUntil(caches.open("budget").then(function(e){return e.addAll(URLS_CACHE_ONLY.concat(URLS_OVER_NETWORK_WITH_CACHE_FALLBACK))}).catch(e=>(console.error(e),new Promise((t,n)=>{n("ERROR: "+e)}))))}),self.addEventListener("fetch",function(e){const t=new URL(e.request.url);"/"===t.pathname?e.respondWith(getByNetworkFallingBackByCache("/index.html")):URLS_OVER_NETWORK_WITH_CACHE_FALLBACK.includes(t.href)||URLS_OVER_NETWORK_WITH_CACHE_FALLBACK.includes(t.pathname)?e.respondWith(getByNetworkFallingBackByCache(e.request)):(URLS_CACHE_ONLY.includes(t.href)||URLS_CACHE_ONLY.includes(t.pathname))&&e.respondWith(getByCacheOnly(e.request))}),self.addEventListener("activate",function(e){e.waitUntil(caches.keys().then(function(e){return Promise.all(e.map(function(e){if("budget"!==e&&e.startsWith("vid-voter"))return caches.delete(e)}))}))});const getByNetworkFallingBackByCache=(e,t=!1)=>caches.open("budget").then(n=>fetch(e).then(t=>(n.put(e,t.clone()),t)).catch(()=>(t&&alert("Inget nÃ¤tverk. Endast lokalt lagrad data."),caches.match(e)))),getByCacheOnly=e=>caches.open("budget").then(t=>t.match(e).then(e=>e));
